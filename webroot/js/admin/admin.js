define(["require","jquery","slimscroll"],function(e){function i(){var e=n(window).height()-n("body > .header").height();n(".wrapper").css("min-height",e+"px");var t=n(".wrapper").height();t>e?n(".left-side, html, body").css("min-height",t+"px"):n(".left-side, html, body").css("min-height",e+"px")}function s(){if(!n("body").hasClass("fixed"))return;n(".sidebar").slimscroll({height:n(window).height()-n(".header").height()+"px",color:"rgba(0,0,0,0.2)"})}function o(){n("body").toggleClass("fixed"),s()}var n=e("jquery"),r=e("slimscroll");n(document).ready(function(){n("[data-toggle='offcanvas']").click(function(e){e.preventDefault(),n(window).width()<=992?(n(".row-offcanvas").toggleClass("active"),n(".left-side").removeClass("collapse-left"),n(".right-side").removeClass("strech"),n(".row-offcanvas").toggleClass("relative")):(n(".left-side").toggleClass("collapse-left"),n(".right-side").toggleClass("strech"))}),n(".btn").bind("touchstart",function(){n(this).addClass("hover")}).bind("touchend",function(){n(this).removeClass("hover")}),n('.btn-group[data-toggle="btn-toggle"]').each(function(){var e=n(this);n(this).find(".btn").click(function(t){e.find(".btn.active").removeClass("active"),n(this).addClass("active"),t.preventDefault()})}),n(".sidebar .treeview").tree(),i(),n(".wrapper").resize(function(){i(),s()}),s(),n.fn.extend({slimscroll:n.fn.slimScroll})}),function(e){"use strict";e.fn.tree=function(){return this.each(function(){var t=e(this).children("a").first(),n=e(this).children(".treeview-menu").first(),r=e(this).hasClass("active");t.append('<i class="fa pull-right fa-angle-left">&nbsp;</i>'),r&&(n.show(),t.children(".fa-angle-left").first().removeClass("fa-angle-left").addClass("fa-angle-down")),t.click(function(e){e.preventDefault(),r?(n.slideUp(),r=!1,t.children(".fa-angle-down").first().removeClass("fa-angle-down").addClass("fa-angle-left"),t.parent("li").removeClass("active")):(n.slideDown(),r=!0,t.children(".fa-angle-left").first().removeClass("fa-angle-left").addClass("fa-angle-down"),t.parent("li").addClass("active"))}),n.find("li > a").each(function(){var t=parseInt(e(this).css("margin-left"))+10;e(this).css({"margin-left":t+"px"})})})},e.fn.extend({slimScroll:function(e){var n=f.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"0px",railBorderRadius:"0px"},e);return this.each(function(){function r(e){if(c){e=e||window.event;var t=0;e.wheelDelta&&(t=-e.wheelDelta/120),e.detail&&(t=e.detail/3),f(e.target||e.srcTarget||e.srcElement).closest("."+n.wrapperClass).is(S.parent())&&i(t,!0),e.preventDefault&&!E&&e.preventDefault(),E||(e.returnValue=!1)}}function i(e,t,r){E=!1;var i=e,s=S.outerHeight()-T.outerHeight();t&&(i=parseInt(T.css("top"))+e*parseInt(n.wheelStep)/100*T.outerHeight(),i=Math.min(Math.max(i,0),s),i=0<e?Math.ceil(i):Math.floor(i),T.css({top:i+"px"})),y=parseInt(T.css("top"))/(S.outerHeight()-T.outerHeight()),i=y*(S[0].scrollHeight-S.outerHeight()),r&&(i=e,e=i/S[0].scrollHeight*S.outerHeight(),e=Math.min(Math.max(e,0),s),T.css({top:e+"px"})),S.scrollTop(i),S.trigger("slimscrolling",~~i),u(),l()}function s(){window.addEventListener?(this.addEventListener("DOMMouseScroll",r,!1),this.addEventListener("mousewheel",r,!1),this.addEventListener("MozMousePixelScroll",r,!1)):document.attachEvent("onmousewheel",r)}function o(){g=Math.max(S.outerHeight()/S[0].scrollHeight*S.outerHeight(),w),T.css({height:g+"px"});var e=g==S.outerHeight()?"none":"block";T.css({display:e})}function u(){o(),clearTimeout(v),y==~~y?(E=n.allowPageScroll,b!=y&&S.trigger("slimscroll",0==~~y?"top":"bottom")):E=!1,b=y,g>=S.outerHeight()?E=!0:(T.stop(!0,!0).fadeIn("fast"),n.railVisible&&N.stop(!0,!0).fadeIn("fast"))}function l(){n.alwaysVisible||(v=setTimeout(function(){n.disableFadeOut&&c||p||d||(T.fadeOut("slow"),N.fadeOut("slow"))},1e3))}var c,p,d,v,m,g,y,b,w=30,E=!1,S=f(this);if(S.parent().hasClass(n.wrapperClass)){var x=S.scrollTop(),T=S.parent().find("."+n.barClass),N=S.parent().find("."+n.railClass);o();if(f.isPlainObject(e)){if("height"in e&&"auto"==e.height){S.parent().css("height","auto"),S.css("height","auto");var C=S.parent().parent().height();S.parent().css("height",C),S.css("height",C)}if("scrollTo"in e)x=parseInt(n.scrollTo);else if("scrollBy"in e)x+=parseInt(n.scrollBy);else if("destroy"in e){T.remove(),N.remove(),S.unwrap();return}i(x,!1,!0)}}else{n.height="auto"==n.height?S.parent().height():n.height,x=f("<div></div>").addClass(n.wrapperClass).css({position:"relative",overflow:"hidden",width:n.width,height:n.height}),S.css({overflow:"hidden",width:n.width,height:n.height});var N=f("<div></div>").addClass(n.railClass).css({width:n.size,height:"100%",position:"absolute",top:0,display:n.alwaysVisible&&n.railVisible?"block":"none","border-radius":n.railBorderRadius,background:n.railColor,opacity:n.railOpacity,zIndex:90}),T=f("<div></div>").addClass(n.barClass).css({background:n.color,width:n.size,position:"absolute",top:0,opacity:n.opacity,display:n.alwaysVisible?"block":"none","border-radius":n.borderRadius,BorderRadius:n.borderRadius,MozBorderRadius:n.borderRadius,WebkitBorderRadius:n.borderRadius,zIndex:99}),C="right"==n.position?{right:n.distance}:{left:n.distance};N.css(C),T.css(C),S.wrap(x),S.parent().append(T),S.parent().append(N),n.railDraggable&&T.bind("mousedown",function(e){var n=f(document);return d=!0,t=parseFloat(T.css("top")),pageY=e.pageY,n.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,T.css("top",currTop),i(0,T.position().top,!1)}),n.bind("mouseup.slimscroll",function(e){d=!1,l(),n.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),N.hover(function(){u()},function(){l()}),T.hover(function(){p=!0},function(){p=!1}),S.hover(function(){c=!0,u(),l()},function(){c=!1,l()}),S.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(m=e.originalEvent.touches[0].pageY)}),S.bind("touchmove",function(e){E||e.originalEvent.preventDefault(),e.originalEvent.touches.length&&(i((m-e.originalEvent.touches[0].pageY)/n.touchScrollStep,!0),m=e.originalEvent.touches[0].pageY)}),o(),"bottom"===n.start?(T.css({top:S.outerHeight()-T.outerHeight()}),i(0,!0)):"top"!==n.start&&(i(f(n.start).position().top,null,!0),n.alwaysVisible||T.hide()),s()}}),this}})}(window.jQuery)});